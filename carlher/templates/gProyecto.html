<div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"></div></div><div class=row ng-controller=gProyecto><div class="col-lg-offset-1 col-lg-10 col-xs-12"><div class="panel panel-primary"><div class=panel-heading><span class=panel-title>Gestionar Proyecto</span></div><div class=panel-body><div class=row><form class="form-inline col-sm-offset-4"><div class=form-group><label class=control-label for=nombreBuscar>Proyecto a Buscar:&nbsp;&nbsp;</label> <input type=text class=form-control id=nombreBuscar ng-model=nombreBuscar></div></form></div><br><div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"><table class="table table-striped text-left"><thead><tr><th></th><th><h6><strong>Número</strong></h6></th><th><h6><strong>Nombre</strong></h6></th><th><h6><strong>Fecha</strong></h6></th><th><h6><strong>Descripción</strong></h6></th></tr></thead><tbody><tr ng-repeat="listado in proyectos| filter: nombreBuscar"><td><span class="menu-icon fa fa-edit" ng-click=proyectoEditar(listado.id)></span>&nbsp;&nbsp; <span class="menu-icon fa fa-times" ng-click="openModal('sm', listado.id, 'confEliminar.html')"></span>&nbsp;&nbsp;</td><td><h6>{{listado.numeroAnno}}</h6></td><td><h6>{{listado.nombre}}</h6></td><td><h6>{{listado.inicio}}</h6></td><td><h6>{{listado.descripcion}}</h6></td></tr></tbody></table></div></div></div></div></div><div class="row text-center" ng-show=editar><div class="col-lg-offset-1 col-lg-10 col-xs-12"><div class=row><div class=col-lg-6></div><div class=col-lg-6><button type=submit class="btn btn-primary" ng-click=actualizar()>Actualizar Proyecto</button></div></div><div class="alert alert-danger col-lg-12" ng-show=errorP><div class="col-md-12 text-left"><p><strong>No se puede actualizar el proyecto debido a los siguientes errores:</strong></p><div class="col-md-12 text-left col-lg-offset-1" ng-repeat="listado in errorListado">{{listado.index + 1}}. {{listado.texto}}</div></div></div></div><div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"><div class="panel panel-primary"><div class=panel-heading><span class=panel-title>Datos Generales del Proyecto</span></div><div class="panel-body text-center"><div class="col-lg-12 col-xs-12"><form class=form-horizontal role=form id=formProyecto><div class=form-group><label class="control-label col-md-2" for=nombreP>Nombre:</label><div class=col-md-5><input type=text class=form-control ng-model=nombreP id=nombreP></div><label class="control-label col-md-2" for=numeroP>Número:</label><div class=col-md-3><input type=text class=form-control ng-model=numeroP placeholder=001-2016 id=numeroP readonly></div></div><div class=form-group><label class="control-label col-md-2" for=descripcionP>Descripción:</label><div class=col-md-10><textarea class=form-control style="resize: vertical" ng-model=descripcionP id=descripcionP rows=2></textarea></div></div><div class=row><label class="control-label col-md-5 col-lg-offset-1" style="text-align: center;">Fecha de Inicio:</label> <label class="control-label col-md-5 col-lg-offset-1" style="text-align: center;">Fecha de Entrega:</label></div><div class=form-group ng-controller=dateController><div class="col-md-5 col-lg-offset-1"><p class=input-group><span class=input-group-btn><button class="btn btn-default" ng-click=openInicio($event)><i class="menu-icon fa fa-calendar"></i></button></span> <input type=text class=form-control datepicker-popup={{format}} min-date=minDate max-date=maxDate ng-model=$parent.dtInicio is-open=inicio.opened datepicker-options=dateOptions date-disabled="disabled(date, mode)" ng-required=true close-text=Cerrar></p></div><div class="col-md-5 col-lg-offset-1"><p class=input-group><span class=input-group-btn><button class="btn btn-default" ng-click=openEntrega($event)><i class="menu-icon fa fa-calendar"></i></button></span> <input type=text class=form-control datepicker-popup={{format}} min-date=minDate max-date=maxDate ng-model=$parent.dtEntrega is-open=entrega.opened datepicker-options=dateOptions date-disabled="disabled(date, mode)" ng-required=true close-text=Cerrar></p></div></div></form></div></div></div></div></div><div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"><div class="panel panel-primary"><div class=panel-heading><span class=panel-title>Datos del Cliente</span></div><div class="panel-body text-center"><div class="col-lg-offset-1 col-lg-10 col-xs-12"><form class=form-horizontal role=form id=formCliente><div class=form-group><label class="control-label col-md-2" for=rucC>RUC/CC.:</label><div class=col-md-3><input type=text class=form-control id=rucC ng-model=rucC typeahead="ruc for ruc in rucs | filter:$viewValue" ng-blur=actualizarCliente()></div><label class="control-label col-md-2" for=nombreC>Nombre:</label><div class=col-md-5><input type=text class=form-control id=nombreC ng-model=nombreC ng-readonly=lectura></div></div><div class=form-group><label class="control-label col-md-2" for=direccionC>Dirección:</label><div class=col-md-10><input type=text class=form-control id=direccionC ng-model=direccionC ng-readonly=lectura></div></div><div class=form-group><label class="control-label col-md-2" for=telefonoC>Teléfono:</label><div class=col-md-3><input type=text class=form-control id=telefonoC ng-model=telefonoC ng-readonly=lectura></div><label class="control-label col-md-2" for=emailC>Email:</label><div class=col-md-5><input type=text class=form-control id=emailC ng-model=emailC ng-readonly=lectura></div></div></form></div></div></div></div></div><div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"><div class="panel panel-primary"><div class=panel-heading><span class=panel-title>Listado de Módulos a utilizar</span></div><div class="panel-body text-center" style="margin: 0 -30px;"><div class="col-lg-12 col-xs-12" ng-controller=adicArbolTabla><form class=form-horizontal role=form id=formListado><div class=col-md-8><table class="table table-striped text-left"><thead><tr><th></th><th class="col-md-3 text-center"><h6><strong>Nombre</strong></h6></th><th class="col-md-3 text-center"><h6><strong>Dimension</strong></h6></th><th class="col-md-3 text-center"><h6><strong>Línea</strong></h6></th><th class="col-md-2 text-center"><h6><strong>Cant.</strong></h6></th><th class="col-md-1 text-center"><h6><strong>Compra</strong></h6></th><th class="col-md-1 text-center"><h6><strong>Venta</strong></h6></th><th class="col-md-2 text-center"><h6><strong>Oferta</strong></h6></th></tr></thead><tbody><tr ng-repeat="modulo in $parent.listado"><td><span class="menu-icon fa fa-times" ng-click="openModal('sm', modulo.index, 'confEliminarLista.html')"></span></td><td><h6>{{ modulo.nombre}}</h6></td><td><input type=text min=1 class=form-control ng-model=modulo.anchoL id=modulo.index ng-disabled=modulo.habilitarD ng-change="updateDimensionL(tlineas[modulo.index].selected, modulo.index, 'A')" style="width: 50px; float: left"> <input type=text min=1 class=form-control ng-model=modulo.largoL id=modulo.index ng-disabled=modulo.habilitarD ng-change="updateDimensionL(tlineas[modulo.index].selected, modulo.index, 'L')" style="width: 50px; float: left"></td><td><select class=form-control ng-model=tlineas[modulo.index].selected id=tlineas[modulo.index] ng-options="lLinea.id as lLinea.nombre for lLinea in $parent.lineas" ng-change="updateLinea(tlineas[modulo.index].selected, modulo.index)"></select></td><td><input type=number min=1 class=form-control ng-model=modulo.cantidad id=modulo.index ng-change="updateCantidadP(modulo.cantidad, modulo.index)"></td><td><h6>{{ modulo.compraT}}</h6></td><td><h6>{{ modulo.ventaT}}</h6></td><td><input type=text pattern=[0-9] class=form-control ng-change="updateOferta(modulo.index, modulo.ofertaT)" ng-model=modulo.ofertaT id=txt_oferta></td></tr></tbody></table></div><div class="col-md-4 text-left" style="padding-bottom: 15px; padding-top: 5px;"><label class="control-label col-md-3" for=tipoI>Línea:</label><div class=col-md-9><select class=form-control ng-model=lineas.selected ng-options="lLinea.id as lLinea.nombre for lLinea in lineas" ng-change=actualizarLineas()></select></div></div><div class="col-md-4 text-left abn-tree" ng-controller=angularBootstrapNavTree><div class="indented tree-icon" style="background:whitesmoke;border:1px solid lightgray;border-radius:5px;"><abn-tree tree-data=modulos icon-leaf="fa fa-gear" expand-level=2 tree-control=my_tree></abn-tree></div></div></form><div class="col-lg-offset-1 col-lg-10 col-xs-12"><div class=col-md-6><button type=button class="btn btn-link" ng-click=verItems()>Ver listado de Items</button></div></div></div></div></div></div></div><div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"><div class="row alert alert-info text-center"><div class=col-md-12><div class=col-md-4><strong>Costo de Producción:</strong> <span>$ {{costo()}}</span></div><div class=col-md-4><strong>Precio de Venta:</strong> <span>$ {{venta()}}</span></div><div class=col-md-4><strong>Oferta:</strong> <span>$ {{oferta()}}</span></div></div></div></div></div></div></div><script type=text/ng-template id=confEliminar.html><div id="confEliminar" style="text-align: center;"> <div class="modal-header"> <h3 class="modal-title"><span class="menu-icon fa fa-question-circle"></span>&nbsp; Confirmación</h3> </div> <div class="modal-body"> <div> ¿Desea eliminar los datos? </div> </div> <div class="modal-footer"> <div class="col-lg-6 col-md-4"> <button type="button" class="btn btn-primary" ng-click="elimElemento(items,'proyecto')">Eliminar</button> </div> <div class="col-lg-6 col-md-4"> <button type="button" class="btn btn-primary" ng-click="cancel()">Cancelar</button> </div> </div> </div></script><script type=text/ng-template id=ok.html><div id="ok" style="text-align: center;"> <div class="modal-header"> <h3 class="modal-title text-left"><span class="menu-icon fa fa-thumbs-up"></span>&nbsp; Éxito</h3> </div> <div class="modal-body"> <div> {{items}} </div> </div> <div class="modal-footer"> <div class="col-lg-12 col-md-4 text-center"> <button type="button" class="btn btn-success" ng-click="cancel()">Aceptar</button> </div> </div> </div></script><script type=text/ng-template id=error.html><div id="error" style="text-align: center;"> <div class="modal-header"> <h3 class="modal-title text-left"><span class="menu-icon fa fa-ban"></span>&nbsp; Error</h3> </div> <div class="modal-body"> <div> {{items}} </div> </div> <div class="modal-footer"> <div class="col-lg-12 col-md-4 text-center"> <button type="button" class="btn btn-danger" ng-click="cancel()">Aceptar</button> </div> </div> </div></script><script type=text/ng-template id=confEliminarLista.html><div id="confEliminar" style="text-align: center;"> <div class="modal-header"> <h3 class="modal-title"><span class="menu-icon fa fa-question-circle"></span>&nbsp; Confirmación</h3> </div> <div class="modal-body"> <div> ¿Desea eliminar los datos? </div> </div> <div class="modal-footer"> <div class="col-lg-6 col-md-4"> <button type="button" class="btn btn-primary" ng-click="elimLista(items)">Eliminar</button> </div> <div class="col-lg-6 col-md-4"> <button type="button" class="btn btn-primary" ng-click="cancel()">Cancelar</button> </div> </div> </div></script><script type=text/ng-template id=lItems.html><div class="modal-header"> <h3 class="modal-title text-left"> Listado de Items del Proyecto {{items.nombre}}</h3> </div> <div class="modal-body"> <div class="row"> <div class="col-lg-12 text-right checkbox-inline"> <input type="checkbox" ng-model="activo"> Organizar por Módulo </div> <div ng-repeat="datos in items.modulo" ng-show="activo"> <table class="table table-striped text-left"> <thead> <tr> <th style="width: 24%"><h6><strong>Módulo:</strong> {{datos.nombre}}</h6></th> <th style="width: 24%"><h6><strong>Línea:</strong> {{datos.lineaN}}</h6></th> <th style="width: 13%"><h6><strong>Cantidad:</strong> {{datos.cantidad}}</h6></th> <th style="width: 13%"><h6><strong>Compra:</strong> {{datos.compra}}</h6></th> <th style="width: 13%"><h6><strong>Venta:</strong> {{datos.venta}}</h6></th> <th style="width: 13%"><h6><strong>Oferta:</strong> {{datos.oferta}}</h6></th> </tr> </thead> </table> <div ng-repeat="modulo in items.listado[0]"> <div ng-show="modulo.idM == datos.id && modulo.idL == datos.lineaI && modulo.ancho == datos.anchoL && modulo.largo == datos.largoL" class="col-lg-10 col-lg-offset-1"> <div ng-show="modulo.items.length > 0"> <table class="table table-striped text-left col-lg-10"> <thead> <tr> <th><h6><strong>Nombre del Item</strong></h6></th> <th><h6><strong>Cantidad</strong></h6></th> <th><h6><strong>Compra</strong></h6></th> <th><h6><strong>Venta</strong></h6></th> </tr> </thead> <tbody> <tr ng-repeat="item in modulo.items"> <td><h6>{{item.nombre}}</td> <td><h6>{{item.cantidad * datos.cantidad}}</h6></td> <td><h6>{{item.compra * item.cantidad * datos.cantidad | number:3}}</h6></td> <td><h6>{{item.venta * item.cantidad * datos.cantidad | number:2}}</h6></td> </tr> </tbody> </table> </div> </div> </div> </div> <div ng-repeat="modulo in items.listado[0]" ng-show="!activo && modulo.items.length > 0 && modulo.idM === 'T'" class="col-lg-10 col-lg-offset-1"> <table class="table table-striped text-left col-lg-10"> <thead> <tr> <th><h6><strong>Nombre del Item</strong></h6></th> <th><h6><strong>Cantidad</strong></h6></th> <th><h6><strong>Compra</strong></h6></th> <th><h6><strong>Venta</strong></h6></th> </tr> </thead> <tbody> <tr ng-repeat="item in modulo.items"> <td><h6>{{item.nombre}}</td> <td><h6>{{item.cantidad}}</h6></td> <td><h6>{{item.compra * item.cantidad | number:3}}</h6></td> <td><h6>{{item.venta * item.cantidad | number:2}}</h6></td> </tr> </tbody> </table> </div> </div> </div> <div class="modal-footer"> <div class="col-lg-6 text-center"> <button type="button" class="btn btn-toolbar" ng-click="downloadPdf(items, 'PdfProyecto', activo)">Imprimir</button> </div> <div class="col-lg-6 text-center"> <button type="button" class="btn btn-primary" ng-click="cancel()">Volver</button> </div> </div></script>