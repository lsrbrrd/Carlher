<div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"></div></div><div class=row ng-controller=gModulo><div class="col-lg-offset-1 col-lg-10 col-xs-12"><div class="panel panel-primary"><div class=panel-heading><span class=panel-title>Gestionar Módulo</span></div><div class=panel-body><div class=row><form class="form-inline col-sm-offset-4"><div class=form-group><label class=control-label for=nombreBuscar>Módulo a Buscar:&nbsp;&nbsp;</label> <input type=text class=form-control ng-model=nombreBuscar id=nombreBuscar></div></form></div><br><div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"><table class="table table-striped text-left"><thead><tr><th></th><th><h6><strong>Nombre</strong></h6></th><th><h6><strong>Descripción</strong></h6></th><th><h6><strong>Items que lo Componen</strong></h6></th><th><h6><strong>Módulos que lo Componen</strong></h6></th></tr></thead><tbody><tr></tr><tr ng-repeat="listado in modulos| filter: nombreBuscar"><td><span class="menu-icon fa fa-edit" ng-click=moduloEditar(listado.id)></span>&nbsp;&nbsp; <span class="menu-icon fa fa-times" ng-click="openModal('sm', listado.id, 'confEliminar.html')"></span></td><td><h6>{{listado.nombre}}</h6></td><td><h6>{{listado.descripcion}}</h6></td><td><h6><span ng-repeat="item in listado.items" style="float: left; padding-right: 2em">{{item.nombre}}</span></h6></td><td><h6><span ng-repeat="modulo in listado.modulos" style="float: left; padding-right: 2em">{{modulo.nombre}}</span></h6></td></tr></tbody></table></div></div></div></div></div><div class="row text-center" ng-show=editar><div class="col-lg-offset-1 col-lg-10 col-xs-12"><div class=row><div class="col-lg-12 text-right"><button type=submit class="btn btn-primary" ng-click=actualizar()>Actualizar Módulo</button></div></div><div class="alert alert-danger col-lg-12" ng-show=errorP><div class="col-md-12 text-left"><p><strong>No se puede guardar el módulo debido a los siguientes errores:</strong></p><div class="col-md-12 text-left col-lg-offset-1" ng-repeat="listado in errorListado">{{listado.index + 1}}. {{listado.texto}}</div></div></div></div><div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"><div class="panel panel-primary"><div class=panel-heading><span class=panel-title>Datos Generales del Módulo</span></div><div class="panel-body text-center"><div class="col-lg-offset-1 col-lg-10 col-xs-12"><form class=form-horizontal role=form><div class=form-group><label class="control-label col-md-2" for=nombreM>Nombre:</label><div class=col-md-5><input type=text class=form-control id=nombreM ng-model=nombreM></div><label class="control-label col-md-2">Área:</label><div class=col-md-3><select class=form-control ng-model=area.selected required ng-options="lArea.id as lArea.nombre for lArea in area"></select></div></div><div class=form-group><label class="control-label col-md-2" for=codigoM>Código:</label><div class=col-md-5><input type=text class=form-control ng-model=codigoM></div><label class="control-label col-md-2" for=ofertaM>P. Oferta:</label><div class=col-md-3><input type=text class=form-control ng-model=ofertaM></div></div><div class=form-group><label class="control-label col-md-2" for=descripcionM>Descripción:</label><div class=col-md-10><textarea class=form-control style="resize: vertical" ng-model=descripcionM rows=2></textarea></div></div></form></div></div></div></div></div><div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"><div class="panel panel-primary"><div class=panel-heading><span class=panel-title>Listado de Items y Módulos a utilizar</span></div><div class="panel-body text-center" style="margin: 0 -30px;"><div class="col-lg-12 col-md-12 col-xs-12" ng-controller=adicArbolTabla><div class=col-md-7><table class="table table-striped text-left"><thead><tr><th></th><th class="col-md-6 text-center"><h6><strong>Nombre</strong></h6></th><th class="col-md-2 text-center"><h6><strong>Cantidad</strong></h6></th><th class="col-md-2 text-center"><h6><strong>Compra</strong></h6></th><th class="col-md-2 text-center"><h6><strong>Venta</strong></h6></th></tr></thead><tbody><tr ng-repeat="modulo in $parent.listado"><td><span class="menu-icon fa fa-times" ng-click="openModal('sm', modulo.index, 'confEliminarLista.html')"></span></td><td><h6>{{ modulo.nombre}}</h6></td><td><input type=number min=1 class=form-control ng-model=modulo.cantidad id=modulo.index ng-change="updateCantidadM(modulo.cantidad, modulo.index)"></td><td><h6>{{ modulo.compraT}}</h6></td><td><h6>{{ modulo.ventaT}}</h6></td></tr></tbody></table></div><div class="col-md-5 text-left abn-tree" ng-controller=angularBootstrapNavTree style="margin: 10px 0;"><div class="indented tree-icon" style="margin-left:20px;background:whitesmoke;border:1px solid lightgray;border-radius:5px;"><abn-tree tree-data=modulos icon-leaf="fa fa-gear" expand-level=2 tree-control=my_tree></abn-tree></div><div class="indented tree-icon" style="margin-left:20px;background:whitesmoke;border:1px solid lightgray;border-radius:5px;margin-top: 20px;"><abn-tree tree-data=items icon-leaf="fa fa-gear" expand-level=2 tree-control=my_tree></abn-tree></div></div></div></div></div></div></div><div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"><div class="row alert alert-info text-center"><div class=col-md-12><div class=col-md-6><strong>Costo de Producción:</strong> <span>$ {{costo()}}</span></div><div class=col-md-6><strong>Precio de Venta:</strong> <span>$ {{venta()}}</span></div></div></div></div></div></div></div><script type=text/ng-template id=confEliminar.html><div id="confEliminar" style="text-align: center;"> <div class="modal-header"> <h3 class="modal-title"><span class="menu-icon fa fa-question-circle"></span>&nbsp; Confirmación</h3> </div> <div class="modal-body"> <div> ¿Desea eliminar los datos? </div> </div> <div class="modal-footer"> <div class="col-lg-6 col-md-4"> <button type="button" class="btn btn-primary" ng-click="elimElemento(items,'modulo')">Eliminar</button> </div> <div class="col-lg-6 col-md-4"> <button type="button" class="btn btn-primary" ng-click="cancel()">Cancelar</button> </div> </div> </div></script><script type=text/ng-template id=ok.html><div id="ok" style="text-align: center;"> <div class="modal-header"> <h3 class="modal-title text-left"><span class="menu-icon fa fa-thumbs-up"></span>&nbsp; Éxito</h3> </div> <div class="modal-body"> <div> {{items}} </div> </div> <div class="modal-footer"> <div class="col-lg-12 col-md-4 text-center"> <button type="button" class="btn btn-success" ng-click="cancel()">Aceptar</button> </div> </div> </div></script><script type=text/ng-template id=error.html><div id="error" style="text-align: center;"> <div class="modal-header"> <h3 class="modal-title text-left"><span class="menu-icon fa fa-ban"></span>&nbsp; Error</h3> </div> <div class="modal-body"> <div> {{items}} </div> </div> <div class="modal-footer"> <div class="col-lg-12 col-md-4 text-center"> <button type="button" class="btn btn-danger" ng-click="cancel()">Aceptar</button> </div> </div> </div></script><script type=text/ng-template id=confEliminarLista.html><div id="confEliminar" style="text-align: center;"> <div class="modal-header"> <h3 class="modal-title"><span class="menu-icon fa fa-question-circle"></span>&nbsp; Confirmación</h3> </div> <div class="modal-body"> <div> ¿Desea eliminar los datos? </div> </div> <div class="modal-footer"> <div class="col-lg-6 col-md-4"> <button type="button" class="btn btn-primary" ng-click="elimLista(items)">Eliminar</button> </div> <div class="col-lg-6 col-md-4"> <button type="button" class="btn btn-primary" ng-click="cancel()">Cancelar</button> </div> </div> </div></script><script type=text/ng-template id=dimensiones.html><div id="ok" style="text-align: center;"> <form class="form-horizontal" role="formD"> <div class="modal-header"> <h3 class="modal-title text-left"><span class="menu-icon fa fa-shield"> </span>&nbsp; Dimensiones del Item</h3> </div> <div class="modal-body"> <div class="form-group"> <label class="control-label col-md-2" for="nombreM">Ancho:</label> <div class="col-md-4"> <input type="text" class="form-control" id="aI" name="aI" ng-model="aI" ng-pattern="/^\d{0,9}(\.\d{1,2})?$/" required ng-class="{ error: formD.aI.$error.required && !formD.$pristine, warning: formD.aI.$error.pattern }"> <span ng-show="!formD.$pristine && formD.aI.$error.required">Escriba el ancho</span> <span ng-show="!formD.$pristine && formD.aI.$error.pattern">Ancho inválido</span> </div> <label class="control-label col-md-2">Largo:</label> <div class="col-md-4"> <input type="text" class="form-control" id="lI" name="lI" ng-model="lI" ng-pattern="/^\d{0,9}(\.\d{1,2})?$/" required ng-class="{ error: formD.lI.$error.required && !formD.$pristine, warning: formD.lI.$error.pattern }"> <span ng-show="!formD.$pristine && formD.lI.$error.required">Escriba el largo</span> <span ng-show="!formD.$pristine && formD.lI.$error.pattern">Largo inválido</span> </div> </div> </div> <div class="modal-footer"> <div class="col-lg-12 col-md-4 text-center"> <button type="button" class="btn btn-success" ng-click="salvarD()" >Aceptar</button> </div> </div> </form> </div></script>