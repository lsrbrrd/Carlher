<div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"></div></div><div class=row ng-controller=gItem><div class="col-lg-offset-1 col-lg-10 col-xs-12"><div class="panel panel-primary"><div class=panel-heading><span class=panel-title>Gestionar Item</span></div><div class=panel-body><div class=row><form class="form-inline col-sm-offset-2 col-lg-5"><div class=form-group><label class=control-label for=gestionI>Item a Buscar&nbsp;&nbsp;</label> <input type=text class=form-control ng-model=gestionI id=gestionI></div></form><div class="col-lg-offset-1 col-lg-4"><div class=col-md-6><button type=button class="btn btn-link" ng-click=verGItems()>Ver listado de Items</button></div></div></div><br><div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"><table class="table table-striped text-left"><thead><tr><th></th><th><h6><strong>Nombre</strong></h6></th><th><h6><strong>Código</strong></h6></th><th><h6><strong>PrecioCompra</strong></h6></th><th><h6><strong>Descripción</strong></h6></th></tr></thead><tbody><tr ng-repeat="listado in items| filter: gestionI"><td><span class="menu-icon fa fa-edit" ng-click=itemEditar(listado.id)></span>&nbsp;&nbsp; <span class="menu-icon fa fa-times" ng-click="openModal('sm', listado.id, 'confEliminar.html')"></span></td><td><h6>{{listado.nombre}}</h6></td><td><h6>{{listado.codigo}}</h6></td><td><h6>{{listado.precio_compra}}</h6></td><td><h6>{{listado.descripcion}}</h6></td></tr></tbody></table></div></div></div></div></div><div class="col-lg-offset-1 col-lg-10 col-xs-12" ng-show=editar><div class="panel panel-primary"><div class=panel-heading><span class=panel-title>Datos del Item a Modificar</span></div><div class=panel-body><div class="col-lg-offset-1 col-lg-10 col-xs-12"><form class=form-horizontal role=form ng-submit=actualizar() name=formItem><div class=form-group><label class="control-label col-md-3 col-sm-2" for=tipoI>Tipo:</label><div class=col-sm-4><select class=form-control ng-model=tipos.selected required ng-options="lTipo.id as lTipo.nombre for lTipo in tipos" ng-change=actualizarNombres()></select><span ng-show="!formItem.$pristine && tipos.selected === 0">Seleccione un tipo</span></div><div class="col-md-5 text-center"><label class=control-label for=codigoI>Solicitar dimensiones:&nbsp&nbsp</label> <input type=checkbox ng-model=activo></div></div><div class=form-group><label class="control-label col-md-3 col-sm-2" for=nombreI>Nombre:</label><div class=col-sm-4><input type=text class="form-control col-sm-9" id=nombreI name=nombreI ng-model=nombreI ng-pattern="/^([a-zA-Z0-9- /.])+$/" required ng-class="{ error: formItem.nombreI.$error.required && !formItem.$pristine, warning: formItem.nombreI.$error.pattern }"> <span ng-show="!formItem.$pristine && formItem.nombreI.$error.required">Debe especificar el nombre</span> <span ng-show="!formItem.$pristine && formItem.nombreI.$error.pattern">Escriba un nombre válido</span></div><label class="control-label col-md-2 col-sm-2" for=codigoI>Código:</label><div class=col-md-3><input type=text class="form-control col-sm-9" id=codigoI name=codigoI ng-model=codigoI ng-pattern="/^([a-zA-Z0-9- /.])+$/" required ng-class="{ error: formItem.codigoI.$error.required && !formItem.$pristine, warning: formItem.codigoI.$error.pattern }"> <span ng-show="!formItem.$pristine && formItem.codigoI.$error.required">Escriba el código</span> <span ng-show="!formItem.$pristine && formItem.codigoI.$error.pattern">Código inválido</span></div></div><div class=form-group><label class="control-label col-md-3 col-sm-2" for=descripcionI>Descripción:</label><div class=col-sm-9><textarea class=form-control style="resize: vertical" id=descripcionI name=descripcionI ng-model=descripcionI rows=2 required ng-class="{ error: formItem.descripcionI.$error.required && !formItem.$pristine }"></textarea> <span ng-show="!formItem.$pristine && formItem.descripcionI.$error.required">Debe especificar una descripción.</span></div></div><div class=form-group><label class="control-label col-md-3 col-sm-2" for=compraI>Precio de Compra:</label><div class=col-md-3><input type=text class="form-control col-sm-9" id=compraI name=compraI ng-model=compraI ng-pattern="/^\d{0,9}(\.\d{1,3})?$/" required ng-class="{ error: formItem.compraI.$error.required && !formItem.$pristine, warning: formItem.compraI.$error.pattern }"> <span ng-show="!formItem.$pristine && formItem.compraI.$error.required">Escriba el precio</span> <span ng-show="!formItem.$pristine && formItem.compraI.$error.pattern">Precio inválido</span></div><label class="control-label col-md-3 col-sm-2" for=ventaI>Precio de Venta:</label><div class=col-sm-3><input type=text class="form-control col-sm-9" id=ventaI name=ventaI ng-model=ventaI readonly></div></div><div class=form-group ng-repeat="campo in dinamicos"><ng-form name=form><div class=form-group><label class="control-label col-md-3 col-sm-2" for=campo.identificador>{{campo.nombre}}:</label><div class=col-sm-9><input type=text class=form-control id={{campo.identificador}} placeholder="Campo variable según Configuración" name=nombre ng-model=campo.valor ng-pattern=campo.tipo required ng-class="{ error: form.nombre.$error.required && !formItem.$pristine, warning: form.nombre.$error.pattern }"> <span ng-show="!formItem.$pristine && form.nombre.$error.required">Escriba el {{campo.nombre}}</span> <span ng-show="!formItem.$pristine && form.nombre.$error.pattern">{{campo.nombre}} inválido</span></div></div></ng-form></div><div class="row text-center"><div class=col-md-12><button type=submit class="btn btn-primary" ng-disabled="!formItem.$valid || tipos.selected === 0">Actualizar</button></div></div></form></div></div></div></div></div><script type=text/ng-template id=confEliminar.html><div id="confEliminar" style="text-align: center;"> <div class="modal-header"> <h3 class="modal-title"><span class="menu-icon fa fa-question-circle"></span>&nbsp; Confirmación</h3> </div> <div class="modal-body"> <div> ¿Desea eliminar los datos? </div> </div> <div class="modal-footer"> <div class="col-lg-6 col-md-4"> <button type="button" class="btn btn-primary" ng-click="elimElemento(items,'item')">Eliminar</button> </div> <div class="col-lg-6 col-md-4"> <button type="button" class="btn btn-primary" ng-click="cancel()">Cancelar</button> </div> </div> </div></script><script type=text/ng-template id=ok.html><div id="ok" style="text-align: center;"> <div class="modal-header"> <h3 class="modal-title text-left"><span class="menu-icon fa fa-thumbs-up"></span>&nbsp; Éxito</h3> </div> <div class="modal-body"> <div> {{items}} </div> </div> <div class="modal-footer"> <div class="col-lg-12 col-md-4 text-center"> <button type="button" class="btn btn-success" ng-click="cancel()">Aceptar</button> </div> </div> </div></script><script type=text/ng-template id=error.html><div id="error" style="text-align: center;"> <div class="modal-header"> <h3 class="modal-title text-left"><span class="menu-icon fa fa-ban"></span>&nbsp; Error</h3> </div> <div class="modal-body"> <div> {{items}} </div> </div> <div class="modal-footer"> <div class="col-lg-12 col-md-4 text-center"> <button type="button" class="btn btn-danger" ng-click="cancel()">Aceptar</button> </div> </div> </div></script><script type=text/ng-template id=lItems.html><div class="modal-header"> <h3 class="modal-title text-left"> Listado de Items</h3> </div> <div class="modal-body"> <div class="row"> <table class="table table-striped text-left col-lg-10"> <thead> <tr> <th><h6><strong>Nombre</strong></h6></th> <th><h6><strong>Código</strong></h6></th> <th><h6><strong>Descripción</strong></h6></th> </tr> </thead> <tbody> <tr ng-repeat="item in items"> <td><h6>{{item.nombre}}</td> <td><h6>{{item.codigo}}</h6></td> <td><h6>{{item.descripcion}}</h6></td> </tr> </tbody> </table> </div> </div> <div class="modal-footer"> <div class="col-lg-6 text-center"> <button type="button" class="btn btn-toolbar" ng-click="downloadPdf(items, 'PdfItems', '0')">Imprimir</button> </div> <div class="col-lg-6 text-center"> <button type="button" class="btn btn-primary" ng-click="cancel()">Volver</button> </div> </div></script>