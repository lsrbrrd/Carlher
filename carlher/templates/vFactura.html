<div ng-controller=vfactura><div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"></div></div><div class=row><div class="col-lg-offset-2 col-lg-8 col-xs-12"><div class="panel panel-primary"><div class=panel-heading><span class=panel-title>Listado de Facturas</span></div><div class=panel-body><div class="col-lg-offset-1 col-lg-12"><div class="col-md-8 text-left abn-tree" ng-controller=angularBootstrapNavTree><div class="indented tree-icon" style="background:whitesmoke;border:1px solid lightgray;border-radius:5px;"><abn-tree tree-data=facturas icon-leaf="fa fa-gear" expand-level=2 tree-control=my_tree></abn-tree></div></div></div></div></div></div></div><div class=row><div class="col-lg-offset-1 col-lg-10 col-xs-12"></div></div><div class=row ng-show=activo><div class="col-lg-offset-1 col-lg-10 col-xs-12"><div class="panel panel-primary"><div class="panel-heading text-center"><span class=panel-title>FACTURA {{numero}}</span></div><div class=panel-body><div class=row><div class=col-md-2><strong><br>Fecha:</strong></div><div class=col-md-6><br>{{fecha| date: 'longDate' }}</div></div><div class=row><div class=col-md-2><strong>Cliente:</strong></div><div class=col-md-6>SEÑOR(A) {{cliente}}</div></div><div class=row><div class=col-md-2><strong>RUC/CC:</strong></div><div class=col-md-6>{{ruc}}</div></div><div class=row><div class=col-md-2><strong>Dirección:</strong></div><div class=col-md-6>{{dir}}</div></div><div class=row><div class=col-md-2><strong>E-mail:</strong></div><div class=col-md-6>{{correo}}</div></div><div class=row><div class=col-md-2><strong>Teléfono:</strong></div><div class=col-md-6>{{telef}}<br><br><br></div></div><div class=row><div class=col-lg-12><table class="table table-striped"><thead><tr><th style="text-align: center">Cantidad</th><th>Concepto</th><th style="text-align: right">Valor Unitario</th><th style="text-align: right">Valor Total</th></tr></thead><tbody><tr ng-repeat="item in listado[0]"><td style="text-align: center">{{item.cantidad}}</td><td>{{item.concepto}}</td><td style="text-align: right">{{item.unitario| number: 2}}</td><td style="text-align: right">{{item.total| number: 2}}</td></tr></tbody></table></div></div><div class=row><div class=col-lg-10><br><br><strong>SON:</strong> {{letrasTotal}}<br><br></div></div><form class=form-horizontal role=form ng-submit=actualizarFact() name=formFac><div class=row><div class=col-md-4 style="float: right"><table class="table table-striped text-right"><tbody><tr><td><strong>Subtotal:</strong></td><td>$ {{subtotal| number: 2}}</td></tr><tr><td><strong>Descuento:</strong></td><td><input type=text class=form-control id=desc ng-model=descuento style="text-align: right" ng-pattern="/^\d{0,9}(\.\d{1,2})?$/" name=desc ng-class="{warning: formFac.desc.$error.pattern }"></td></tr><tr><td><strong>Tarifa 0% IVA:</strong></td><td><input type=text class=form-control id=tar ng-model=tarifa style="text-align: right" ng-pattern="/^\d{0,9}(\.\d{1,2})?$/" name=tar ng-class="{warning: formFac.tar.$error.pattern }"></td></tr><tr><td><strong>Total:</strong></td><td>$ {{total| number: 2}}</td></tr></tbody></table><div class="col-md-12 text-center"><button type=submit class="btn btn-primary" ng-disabled="(descuento >= subtotal) || (tarifa > 100) || (formFac.desc.$error.pattern) || (formFac.tar.$error.pattern)">Actualizar</button> <span ng-show="descuento >= subtotal"><br>El descuento debe ser menor</span> <span ng-show="tarifa > 100"><br>La tarifa debe ser menor</span></div></div><br><br><br><div class="col-lg-6 text-center"><button type=button class="btn btn-primary" ng-click=imprimirPdf()>Imprimir</button></div></div></form></div></div></div></div></div><script type=text/ng-template id=error.html><div id="error" style="text-align: center;"> <div class="modal-header"> <h3 class="modal-title text-left"><span class="menu-icon fa fa-ban"></span>&nbsp; Error</h3> </div> <div class="modal-body"> <div> {{items}} </div> </div> <div class="modal-footer"> <div class="col-lg-12 col-md-4 text-center"> <button type="button" class="btn btn-danger" ng-click="cancel()">Aceptar</button> </div> </div> </div></script><script type=text/ng-template id=ok.html><div id="ok" style="text-align: center;"> <div class="modal-header"> <h3 class="modal-title text-left"><span class="menu-icon fa fa-thumbs-up"></span>&nbsp; Éxito</h3> </div> <div class="modal-body"> <div> {{items}} </div> </div> <div class="modal-footer"> <div class="col-lg-12 col-md-4 text-center"> <button type="button" class="btn btn-success" ng-click="cancel()">Aceptar</button> </div> </div> </div></script>